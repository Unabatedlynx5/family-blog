---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import '../worker-exports.js';

export const prerender = false;

// Check if user is authenticated
const token = Astro.cookies.get('accessToken')?.value;
const isAuthenticated = !!token;

// If authenticated, redirect to feed
if (isAuthenticated) {
  return Astro.redirect('/feed');
}
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<style>
			.hero {
				text-align: center;
				padding: 4rem 2rem;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				border-radius: 1rem;
				margin: 2rem 0;
			}
			.hero h1 {
				font-size: 3rem;
				margin-bottom: 1rem;
				font-weight: 800;
			}
			.hero p {
				font-size: 1.25rem;
				margin-bottom: 2rem;
				opacity: 0.95;
			}
			.cta-button {
				display: inline-block;
				padding: 1rem 2.5rem;
				background: white;
				color: #667eea;
				border-radius: 0.5rem;
				text-decoration: none;
				font-weight: 700;
				font-size: 1.1rem;
				transition: transform 0.2s, box-shadow 0.2s;
			}
			.cta-button:hover {
				transform: translateY(-2px);
				box-shadow: 0 10px 25px rgba(0,0,0,0.2);
			}
			.features {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
				gap: 2rem;
				margin: 3rem 0;
			}
			.feature {
				padding: 2rem;
				background: var(--gray-light, #f7f7f7);
				border-radius: 0.75rem;
				text-align: center;
			}
			.feature-icon {
				font-size: 3rem;
				margin-bottom: 1rem;
			}
			.feature h3 {
				margin-bottom: 0.5rem;
				color: var(--gray-dark, #333);
			}
			.feature p {
				color: var(--gray, #666);
				line-height: 1.6;
			}
			.about {
				background: var(--gray-gradient, #f9f9f9);
				padding: 3rem 2rem;
				border-radius: 1rem;
				margin: 2rem 0;
			}
			.about h2 {
				text-align: center;
				margin-bottom: 1.5rem;
				color: var(--gray-dark, #333);
			}
			.about p {
				max-width: 700px;
				margin: 0 auto 1rem;
				line-height: 1.8;
				color: var(--gray, #555);
			}
		</style>
	</head>
	<body>
		<Header />
		<main class="container">
			<section class="hero">
				<h1>üè† Family Blog</h1>
				<p>A private space to share updates, memories, and moments with the people who matter most.</p>
				<a href="/login" class="cta-button">Sign In to Get Started</a>
			</section>

			<section class="features">
				<div class="feature">
					<div class="feature-icon">üìù</div>
					<h3>Share Updates</h3>
					<p>Post text updates, photos, and stories with your family members in a private, secure environment.</p>
				</div>
				<div class="feature">
					<div class="feature-icon">üñºÔ∏è</div>
					<h3>Photo Sharing</h3>
					<p>Upload and share photos with automatic cloud storage. Keep your family memories safe and accessible.</p>
				</div>
				<div class="feature">
					<div class="feature-icon">üí¨</div>
					<h3>Real-Time Chat</h3>
					<p>Connect with family members instantly through our live chat feature for quick conversations.</p>
				</div>
				<div class="feature">
					<div class="feature-icon">üîí</div>
					<h3>Privacy First</h3>
					<p>Your family's data is protected with enterprise-grade security. Only invited members can access the blog.</p>
				</div>
				<div class="feature">
					<div class="feature-icon">üì±</div>
					<h3>Mobile Friendly</h3>
					<p>Access your family blog from any device - desktop, tablet, or mobile phone.</p>
				</div>
				<div class="feature">
					<div class="feature-icon">üì∞</div>
					<h3>RSS Feed</h3>
					<p>Stay updated with new posts through RSS feeds that you can subscribe to in your favorite reader.</p>
				</div>
			</section>

			<section class="about">
				<h2>About This Platform</h2>
				<p>
					This family blog is designed to keep loved ones connected, no matter the distance. 
					Share your daily moments, celebrate milestones, and maintain strong family bonds through 
					a platform that values your privacy and security.
				</p>
				<p>
					Built on Cloudflare's global infrastructure, your family blog is fast, reliable, and always available. 
					With features like photo uploads, real-time chat, and a beautiful reading experience, 
					it's the perfect way to stay in touch with family.
				</p>
				<p style="text-align: center; margin-top: 2rem;">
					<strong>Ready to get started?</strong> 
					<a href="/login" style="color: #667eea; text-decoration: underline;">Sign in to your account</a> 
					or contact the administrator for access.
				</p>
			</section>
		</main>
		<Footer />
	</body>
</html>
