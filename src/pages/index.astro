---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import '../worker-exports.js';
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main class="container">
			<section id="welcome" style="text-align:center;">
				<h1>Welcome to the family feed</h1>
				<p>Private updates for family and close friends.</p>
				<div id="cta"></div>
			</section>
		</main>
		<Footer />

		<script>
		(async function(){
			const cta = document.getElementById('cta');
			const token = sessionStorage.getItem('accessToken');
			if(!token){
				cta.innerHTML = '<a class="button" href="/login">Sign in to view the feed</a>';
			} else {
				cta.innerHTML = '<a class="button" href="/feed">Go to your feed</a>';
			}
		})();
		</script>
	</body>
</html>
